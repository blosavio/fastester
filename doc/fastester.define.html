<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>fastester.define documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Fastester</span> <span class="project-version">version 0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fastester</span></div></div></li><li class="depth-2 branch"><a href="fastester.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch current"><a href="fastester.define.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>define</span></div></a></li><li class="depth-2 branch"><a href="fastester.display.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>display</span></div></a></li><li class="depth-2 branch"><a href="fastester.measure.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>measure</span></div></a></li><li class="depth-2"><a href="fastester.options.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>options</span></div></a></li></ul><ul class="index-link"><li class="depth-1"><a href="https://github.com/blosavio/fastester">Project home</a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="fastester.define.html#var-defbench"><div class="inner"><span>defbench</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">fastester.define</h1><div class="doc"><div class="markdown"><p>Define benchmarks.</p>
<p>Benchmarks are typically defined in a dedicated namespace, akin to defining unit tests.</p>
</div></div><div class="public anchor" id="var-defbench"><h3>defbench</h3><h4 class="type">macro</h4><div class="usage"><code>(defbench name group f n)</code></div><div class="doc"><div class="markdown"><p>Define a benchmark by binding a hashmap containing a function, arguments sequence, and group to a name.</p>
<ul>
<li><code>name</code> is a symbol that labels the benchmark.</li>
<li><code>group</code> is a string, shared between multiple conceptually-related benchmarks.</li>
<li><code>f</code> is a 1-arity function that measures some performance aspect. Its single argument is the “n” in <em>big-O</em> notation. <code>f</code> may be supplied as an S-expression or a function object. Supplying <code>f</code> as an S-expression has the advantage that the definition may later convey some meaning, e.g., <code>(fn [n] (+ n n))</code>, in the html charts and tables, whereas a function object will render less meaningfully, e.g., <code>#function[fastester.measure/eval11540/fn--11541]</code>.</li>
<li><code>n</code> is a sequence of one or more arguments. During performance testing, elements of <code>n</code> will be individually supplied to the benchmarking utility.</li>
</ul>
<p>Example, supplying <code>f</code> as an S-expression:</p>
<pre><code class="language-clojure">(defbench add-two "benchmarking addition" (fn [n] (+ n n)) [1 10 100 1000])
</code></pre>
<p>Example, supplying <code>f</code> as a function object:</p>
<pre><code class="language-clojure">(defn my-fn-obj [q] (+ q q q))

(defbench add-three "benchmarking addition" my-fn-obj [2 20 200 2000])
</code></pre>
<p>Both examples above share the same <code>group</code> label (“benchmarking addition”), as both are concerned with measuring the performance of <code>+</code>. Putting them in the same group signifies that they are conceptually-related, and the html document will aggregate them under a single subsection. Also notice that the <code>n</code> sequences need not be identical.</p>
<p>Note: Invoking a <code>defbench</code> expression, editing the <code>name</code>, followed by invoking <code>defbench</code> a second time, defines two unique benchmarks. When developing at the REPL, be aware that the namespace may become ‘stale’ with orphaned or otherwise outdated benchmarks. Fastester will run benchmarks only explicitly associated to the <code>:benchmarks</code> options key, defined as the namespace exists in the file on the disk.</p>
<p>To undefine a single, unwanted test, use <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/ns-unmap"><code>clojure.core/ns-unmap</code></a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/fastester/blob/main/src/fastester/define.clj#L8">view source</a></div></div></div></body></html>