<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>fastester.measure documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Fastester</span> <span class="project-version">version 1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fastester</span></div></div></li><li class="depth-2 branch"><a href="fastester.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="fastester.define.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>define</span></div></a></li><li class="depth-2 branch"><a href="fastester.display.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>display</span></div></a></li><li class="depth-2 branch current"><a href="fastester.measure.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>measure</span></div></a></li><li class="depth-2"><a href="fastester.options.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>options</span></div></a></li></ul><ul class="index-link"><li class="depth-1"><a href="https://github.com/blosavio/fastester">Project home</a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="fastester.measure.html#var-*lightning-benchmark-opts*"><div class="inner"><span>*lightning-benchmark-opts*</span></div></a></li><li class="depth-1"><a href="fastester.measure.html#var-range-pow-10"><div class="inner"><span>range-pow-10</span></div></a></li><li class="depth-1"><a href="fastester.measure.html#var-range-pow-2"><div class="inner"><span>range-pow-2</span></div></a></li><li class="depth-1"><a href="fastester.measure.html#var-run-benchmarks"><div class="inner"><span>run-benchmarks</span></div></a></li><li class="depth-1"><a href="fastester.measure.html#var-run-manual-benchmark"><div class="inner"><span>run-manual-benchmark</span></div></a></li><li class="depth-1"><a href="fastester.measure.html#var-run-one-defined-benchmark"><div class="inner"><span>run-one-defined-benchmark</span></div></a></li><li class="depth-1"><a href="fastester.measure.html#var-run-save-benchmark"><div class="inner"><span>run-save-benchmark</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">fastester.measure</h1><div class="doc"><div class="markdown"><p>Define and run benchmarks that objectively measure a function’s evaluation time.</p>
<p>The general idea is to run the benchmark suite once per release. Any performance improvement/regression is objectively measured and included in the changelog/release notes.</p>
<p>The <a href="https://github.com/hugoduncan/criterium/">Criterium</a> library does all the actual performance measurements.</p>
<p>See <a href="fastester.display.html">fastester.display</a> for utilities that generate an html document with charts and tables that communicate those results.</p>
</div></div><div class="public anchor" id="var-*lightning-benchmark-opts*"><h3>*lightning-benchmark-opts*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Criterium options with extremely minimal samples, etc. Use only for quick, proof-of-concept runs.</p>
<p>Example:</p>
<pre><code class="language-clojure">  (criterium.core/benchmark (+ 1 2) *lightning-benchmark-opts*)
</code></pre>
<p>See also <a href="https://github.com/hugoduncan/criterium/blob/bb10582ded6de31b4b985dc31d501db604c0e461/src/criterium/core.clj#L83"><code>criterium.core/*default-benchmark-opts*</code></a> and <a href="https://github.com/hugoduncan/criterium/blob/bb10582ded6de31b4b985dc31d501db604c0e461/src/criterium/core.clj#L92"><code>criterium.core/*default-quick-bench-opts*</code></a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/fastester/blob/main/src/fastester/measure.clj#L61">view source</a></div></div><div class="public anchor" id="var-range-pow-10"><h3>range-pow-10</h3><div class="usage"><code>(range-pow-10 i)</code></div><div class="doc"><div class="markdown"><p>Given integer <code>i</code>, returns a sequence of <code>[10^0...10^i]</code>, inclusive. Useful for supplying to benchmarking functions.</p>
<p>Examples:</p>
<pre><code class="language-clojure">(range-pow-10 3) ;; =&gt; (1 10 100 1000)
(range-pow-10 6) ;; =&gt; (1 10 100 1000 10000 100000 1000000)
</code></pre>
<p>See also <a href="fastester.measure.html#var-range-pow-2">range-pow-2</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/fastester/blob/main/src/fastester/measure.clj#L312">view source</a></div></div><div class="public anchor" id="var-range-pow-2"><h3>range-pow-2</h3><div class="usage"><code>(range-pow-2 i)</code></div><div class="doc"><div class="markdown"><p>Given integer <code>i</code>, returns a sequence of <code>[2^0...2^i]</code>, inclusive. Useful for supplying to benchmarking functions.</p>
<p>Example:</p>
<pre><code class="language-clojure">(range-pow-2 8) ;; (1 2 4 8 16 32 64 128 256)
</code></pre>
<p>See also <a href="fastester.measure.html#var-range-pow-10">range-pow-10</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/fastester/blob/main/src/fastester/measure.clj#L328">view source</a></div></div><div class="public anchor" id="var-run-benchmarks"><h3>run-benchmarks</h3><div class="usage"><code>(run-benchmarks)</code><code>(run-benchmarks explicit-options-filename)</code></div><div class="doc"><div class="markdown"><p>Execute benchmarks associated to option key <code>:benchmarks</code>, saving results to a version-specific directory. If <code>explicit-options-filename</code> is not supplied, defaults to <code>./resources/fastester_options.edn</code>.</p>
<p>Upon invocation, reads options file and any benchmarks definition namespace files from the disk. Ensure that the state of the file on disk and that same file opened in a REPL-attached editor is what you intend.</p>
<p>If option <code>:parallel?</code> is <code>true</code>, runs tests in parallel. Warning: Running tests in parallel results in inconsistent time measurements. Use <code>:parallel? true</code> only for sanity-checking the return values of <code>(f n)</code>, not for final performance measurements.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/fastester/blob/main/src/fastester/measure.clj#L246">view source</a></div></div><div class="public anchor" id="var-run-manual-benchmark"><h3>run-manual-benchmark</h3><h4 class="type">macro</h4><div class="usage"><code>(run-manual-benchmark fexpr arg thoroughness)</code></div><div class="doc"><div class="markdown"><p>Given 1-arity S-expression <code>fexpr</code> representing a function and one argument <code>arg</code>, run one benchmark test using keyword <code>thoroughness</code> to designate the Criterium options, sending result to *<code>out</code>*.</p>
<p><code>thoroughness</code> is one of <code>:default</code>, <code>:quick</code>, or <code>:lightning</code>.</p>
<p>Example:</p>
<pre><code class="language-clojure">(run-manual-benchmark (fn [n] (+ n n)) 9 :lightning)
</code></pre>
<p>See <a href="fastester.measure.html#var-run-one-defined-benchmark">run-one-defined-benchmark</a> and <a href="fastester.measure.html#var-*lightning-benchmark-opts*">*lightning-benchmark-opts*</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/fastester/blob/main/src/fastester/measure.clj#L78">view source</a></div></div><div class="public anchor" id="var-run-one-defined-benchmark"><h3>run-one-defined-benchmark</h3><div class="usage"><code>(run-one-defined-benchmark benchmark thoroughness)</code></div><div class="doc"><div class="markdown"><p>Given defined <code>benchmark</code>, an unquoted symbol, and keyword <code>thoroughness</code> that designates the Criterium options, runs a benchmark for each defined argument. Returns a hashmap whose keys are arguments <code>n</code>, associated to values that are the benchmark results for that <code>n</code>.</p>
<p><code>thoroughness</code> is one of <code>:default</code>, <code>:quick</code>, or <code>:lightning</code>.</p>
<p>Example:</p>
<pre><code class="language-clojure">;; define a benchmark
(defbench my-bench "my-group" (fn [x] (inc x)) [97 98 99])

(run-one-defined-benchmark my-bench :lightning)
;; =&gt; {97 {:mean ... :var ...}
;;     98 {:mean ... :var ...}
;;     99 {:mean ... :var ...}}
</code></pre>
<p>The above example returns a hashmap with three key+vals: keys <code>97</code>, <code>98</code>, and <code>99</code>, each associated with its respective benchmark result.</p>
<p>See also <a href="fastester.measure.html#var-run-manual-benchmark">run-manual-benchmark</a> and <a href="fastester.measure.html#var-*lightning-benchmark-opts*">*lightning-benchmark-opts*</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/fastester/blob/main/src/fastester/measure.clj#L343">view source</a></div></div><div class="public anchor" id="var-run-save-benchmark"><h3>run-save-benchmark</h3><div class="usage"><code>(run-save-benchmark ver name namespace group f fexpr arg idx opts)</code></div><div class="doc"><div class="markdown"><p>Given string <code>ver</code>, symbol <code>name</code>, namespace <code>namespace</code>, string <code>group</code>, function object <code>f</code>, function S-expression <code>fexpr</code>, test argument <code>arg</code>, index integer <code>idx</code>, and option hashmap <code>opts</code>, measures the evaluation time according to the option’s <code>:testing-thoroughness</code> for Criterium benchmark settings and saves results to file system.</p>
<p>Example:</p>
<pre><code class="language-clojure">(run-save-benchmark "77-SNAPSHOT7"
                    'mult-two-nums
                    'benchmark-namespace
                    "adding --- stuff"
                    (fn [n] (* n n))
                    '(fn [n] (* n n))
                    22
                    5
                    options)
</code></pre>
<p>See also <a href="fastester.measure.html#var-run-manual-benchmark">run-manual-benchmark</a> and <a href="fastester.measure.html#var-run-one-defined-benchmark">run-one-defined-benchmark</a> for utilities to quickly benchmark an expression.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/fastester/blob/main/src/fastester/measure.clj#L143">view source</a></div></div></div></body></html>